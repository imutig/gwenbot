<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xsgwen - Streameuse Twitch</title>
    <link rel="icon"
        href="https://static-cdn.jtvnw.net/jtv_user_pictures/1efe260a-d1d3-4215-9c9f-5a24aea55625-profile_image-70x70.png">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/css/style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>
    <!-- Floral Background -->
    <div class="floral-bg">
        <svg class="flower flower-1" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
        <svg class="flower flower-2" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
        <svg class="flower flower-3" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
        <svg class="flower flower-4" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
        <svg class="flower flower-5" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
        <svg class="flower flower-6" viewBox="0 0 100 100">
            <g transform="translate(50,50)">
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(0)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(60)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(120)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(180)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(240)" />
                <path d="M0,-35 C10,-35 15,-20 0,0 C-15,-20 -10,-35 0,-35" transform="rotate(300)" />
            </g>
        </svg>
    </div>

    <!-- Dynamic Navbar -->
    <div id="navbar-placeholder"></div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero animate-slideIn" style="text-align: center; margin-bottom: 3rem;">
            <div class="glass-card" style="padding: 3rem;">
                <img src="https://static-cdn.jtvnw.net/jtv_user_pictures/1efe260a-d1d3-4215-9c9f-5a24aea55625-profile_image-70x70.png"
                    alt="xsgwen"
                    style="width: 120px; height: 120px; border-radius: 50%; border: 4px solid var(--pink-main); margin-bottom: 1rem;">

                <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">xsgwen</h1>
                <p style="color: var(--text-muted); margin-bottom: 1rem;">ðŸŒ¸ Streameuse Twitch ðŸŒ¸</p>

                <!-- Live Status -->
                <div id="liveStatus" style="margin-bottom: 1.5rem;">
                    <span class="live-badge" style="display: none;" id="liveBadge">LIVE</span>
                    <span id="offlineStatus" style="color: var(--text-muted); font-size: 0.9rem;">
                        Hors ligne
                    </span>
                    <div id="followersCount" style="margin-top: 0.5rem; color: var(--text-muted); font-size: 0.85rem;">
                    </div>
                </div>

                <!-- Social Links -->
                <div class="social-links" style="margin-bottom: 2rem;">
                    <a href="https://www.twitch.tv/xsgwen" target="_blank" title="Twitch" class="twitch">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z" />
                        </svg>
                    </a>
                    <a href="https://discord.gg/jyyEErgFcq" target="_blank" title="Discord" class="discord">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z" />
                        </svg>
                    </a>
                    <a href="https://www.instagram.com/cyndie.jpg/" target="_blank" title="Instagram" class="instagram">
                        <i data-lucide="instagram"></i>
                    </a>
                    <a href="https://www.tiktok.com/@xsgwen" target="_blank" title="TikTok" class="tiktok">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path
                                d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z" />
                        </svg>
                    </a>
                </div>

                <!-- Watch Button -->
                <a href="https://www.twitch.tv/xsgwen" target="_blank" class="btn btn-primary" style="font-size: 1rem;">
                    <svg viewBox="0 0 24 24" fill="currentColor" style="width: 20px; height: 20px;">
                        <path
                            d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z" />
                    </svg>
                    Regarder sur Twitch
                </a>
            </div>
        </section>

        <!-- Live Stream Section (shown when live) -->
        <section id="liveStreamSection" class="animate-slideIn" style="display: none; margin-bottom: 2rem;">
            <!-- Stream Info Card -->
            <div class="glass-card" style="padding: 1.5rem; margin-bottom: 1rem;">
                <div style="display: flex; gap: 1.5rem; align-items: flex-start; flex-wrap: wrap;">
                    <img id="streamThumbnail" src="" alt="Stream"
                        style="width: 180px; height: 100px; border-radius: 8px; object-fit: cover; background: var(--bg-card);">
                    <div style="flex: 1; min-width: 200px;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span class="live-badge">LIVE</span>
                            <span id="streamViewers" style="font-size: 0.85rem; color: var(--text-muted);">
                                <i data-lucide="users"
                                    style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i>
                                <span id="viewerCount">0</span> viewers
                            </span>
                            <span id="streamDuration" style="font-size: 0.85rem; color: var(--text-muted);">
                                <i data-lucide="clock"
                                    style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i>
                                <span id="durationText">0h</span>
                            </span>
                        </div>
                        <h3 id="streamTitle" style="margin-bottom: 0.5rem; font-size: 1.1rem;"></h3>
                        <p id="streamGame" style="color: var(--pink-accent); font-size: 0.9rem;">
                            <i data-lucide="gamepad-2"
                                style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i>
                            <span id="gameText"></span>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Player & Chat -->
            <div style="display: grid; grid-template-columns: 1fr 340px; gap: 1rem;">
                <div class="glass-card" style="overflow: hidden; padding: 0;">
                    <iframe id="twitchPlayer" src="" height="450" width="100%" allowfullscreen
                        style="border: none; display: block;">
                    </iframe>
                </div>
                <div class="glass-card" style="overflow: hidden; padding: 0;">
                    <iframe id="twitchChat" src="" height="450" width="100%" style="border: none; display: block;">
                    </iframe>
                </div>
            </div>
        </section>

        <!-- Quick Links -->
        <section class="grid-3 animate-slideIn" style="animation-delay: 0.1s;">
            <a href="/cemantix" class="glass-card" style="padding: 2rem; text-align: center;">
                <i data-lucide="target"
                    style="width: 48px; height: 48px; color: var(--pink-accent); margin-bottom: 1rem;"></i>
                <h3 style="margin-bottom: 0.5rem;">Cemantix</h3>
                <p style="font-size: 0.9rem;">Leaderboard & jeu collaboratif</p>
            </a>
            <a href="/planning" class="glass-card" style="padding: 2rem; text-align: center;">
                <i data-lucide="calendar"
                    style="width: 48px; height: 48px; color: var(--pink-accent); margin-bottom: 1rem;"></i>
                <h3 style="margin-bottom: 0.5rem;">Planning</h3>
                <p style="font-size: 0.9rem;">Horaires des streams</p>
            </a>
            <a href="/clips" class="glass-card" style="padding: 2rem; text-align: center;">
                <i data-lucide="film"
                    style="width: 48px; height: 48px; color: var(--pink-accent); margin-bottom: 1rem;"></i>
                <h3 style="margin-bottom: 0.5rem;">Clips</h3>
                <p style="font-size: 0.9rem;">Meilleurs moments</p>
            </a>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>Powered by <a href="#">GwenBot</a></p>
    </footer>

    <script src="/js/main.js"></script>
    <script>
        const TWITCH_CHANNEL = 'xsgwen';
        const PARENT = window.location.hostname;

        // Format duration
        function formatDuration(startedAt) {
            const start = new Date(startedAt);
            const now = new Date();
            const diff = Math.floor((now - start) / 1000 / 60);
            const hours = Math.floor(diff / 60);
            const mins = diff % 60;
            return hours > 0 ? `${hours}h${mins.toString().padStart(2, '0')}` : `${mins}min`;
        }

        // Load followers count
        async function loadFollowers() {
            try {
                const res = await fetch('/api/twitch/followers');
                const data = await res.json();
                if (data.followers > 0) {
                    document.getElementById('followersCount').innerHTML =
                        `<i data-lucide="heart" style="width: 14px; height: 14px; display: inline; vertical-align: middle;"></i> ${data.followers.toLocaleString()} followers`;
                    lucide.createIcons();
                }
            } catch (e) {
                console.error('Error loading followers:', e);
            }
        }

        // Check live status
        async function checkLiveStatus() {
            try {
                const res = await fetch('/api/twitch/live');
                const data = await res.json();

                const liveBadge = document.getElementById('liveBadge');
                const offlineStatus = document.getElementById('offlineStatus');
                const liveSection = document.getElementById('liveStreamSection');

                if (data.isLive && data.stream) {
                    liveBadge.style.display = 'inline-flex';
                    offlineStatus.style.display = 'none';
                    liveSection.style.display = 'block';

                    // Update stream info
                    document.getElementById('streamTitle').textContent = data.stream.title;
                    document.getElementById('gameText').textContent = data.stream.game_name;
                    document.getElementById('viewerCount').textContent = data.stream.viewer_count.toLocaleString();
                    document.getElementById('durationText').textContent = formatDuration(data.stream.started_at);

                    // Update thumbnail
                    const thumbUrl = data.stream.thumbnail_url
                        .replace('{width}', '320')
                        .replace('{height}', '180');
                    document.getElementById('streamThumbnail').src = thumbUrl;

                    // Set player and chat iframes
                    document.getElementById('twitchPlayer').src =
                        `https://player.twitch.tv/?channel=${TWITCH_CHANNEL}&parent=${PARENT}&muted=true`;
                    document.getElementById('twitchChat').src =
                        `https://www.twitch.tv/embed/${TWITCH_CHANNEL}/chat?parent=${PARENT}&darkpopout`;

                    lucide.createIcons();
                } else {
                    liveBadge.style.display = 'none';
                    offlineStatus.style.display = 'inline';
                    liveSection.style.display = 'none';
                }
            } catch (e) {
                console.error('Error checking live status:', e);
            }
        }

        // Initial load
        loadFollowers();
        checkLiveStatus();

        // Refresh every minute
        setInterval(checkLiveStatus, 60000);
    </script>
    <script src="/js/navbar.js"></script>
</body>

</html>